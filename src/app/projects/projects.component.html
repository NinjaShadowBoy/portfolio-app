<!-- src/app/projects/projects.component.html -->
<div class="projects-container">
  <!-- Loading State -->
  @if (isLoading()) {
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading projects...</p>
  </div>
  } @else {

  <!-- Advanced Filters -->
  <div class="filters-section">
    <h3>Filter Projects</h3>
    <div class="filters-grid">
      <div class="filter-group">
        <label for="search">Search Projects:</label>
        <input id="search" [(ngModel)]="searchTerm" placeholder="Search by name or description..."
          class="search-input" />
      </div>

      <div class="filter-group">
        <label for="technology">Technology:</label>
        <select id="technology" [(ngModel)]="selectedTechnology" class="tech-filter">
          <option value="">All Technologies</option>
          @for (tech of uniqueTechnologies(); track tech) {
          <option [value]="tech">{{ tech }}</option>
          }
        </select>
      </div>

      <div class="filter-group">
        <label for="minRating">Minimum Rating:</label>
        <select id="minRating" [(ngModel)]="minRating" class="rating-filter">
          <option [value]="0">Any Rating</option>
          <option [value]="1">1 Star & Up</option>
          <option [value]="2">2 Stars & Up</option>
          <option [value]="3">3 Stars & Up</option>
          <option [value]="4">4 Stars & Up</option>
          <option [value]="5">5 Stars Only</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showFeaturedOnly" />
          Featured Projects Only
        </label>
      </div>

      <div class="filter-actions">
        <button (click)="resetFilters()" class="reset-button">
          Reset Filters
        </button>
      </div>
    </div>
  </div>

  <!-- Projects Grid -->
  <div class="projects-grid">
    @for (project of projects(); track project.id) {
    <app-project-card
      [project]="project"
      [isAdmin]="isAdmin()"
      [canRate]="canRate(project)"
      (toggleDetails)="toggleDetails($event)"
      (addRating)="addRating($event.project, $event.rating)"
      (resetRatings)="resetProjectRatings($event)">
    </app-project-card>
    } @empty {
    <div class="no-results">
      <h3>No projects found</h3>
      <p>Try adjusting your filters to see more projects.</p>
      <button (click)="resetFilters()" class="reset-button">Reset Filters</button>
    </div>
    }
  </div>
  }
</div>
